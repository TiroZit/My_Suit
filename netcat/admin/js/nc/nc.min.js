(function(e,g){var f=function(a,h){return typeof a===h};if(f(e.nc,"function"))return e.nc;"object"!==typeof JSON&&(JSON={});JSON.stringify=JSON.stringify||function(a){var c=typeof a;if("object"!==c||null===a)return"string"===c&&(a='"'+a+'"'),String(a);var k,e=[],d=a&&a.constructor===Array;for(k in a){var b=a[k];c=typeof b;"string"===c?b='"'+b+'"':"object"===c&&null!==b&&(b=JSON.stringify(b));e.push((d?"":'"'+k+'":')+String(b))}return(d?"[":"{")+String(e)+(d?"]":"}")};var b=!1,d={netcat_path:"undefined"===
typeof NETCAT_PATH?"/netcat/":NETCAT_PATH,admin_path:"undefined"===typeof ADMIN_PATH?"/netcat/admin/":ADMIN_PATH,custom_scroll:!0},l=!1,a=function(){return g.apply(null,arguments)};a.$=g;a.window=e;a.root=a;a.view={};a.process_list={};f(e.parent.nc,"function")&&(a.root=e.parent.nc.root);a.is=f;a.debug=function(c,h){a.is_bool(c)&&!a.is_undefined(c)?b=c:b&&console.log(c+":",h);return b};a.key_exists=function(a,h){return h?h.hasOwnProperty(a):!1};a.is_object=function(a){return f(a,"object")};a.is_undefined=
function(a){return f(a,"undefined")};a.is_bool=function(a){return f(a,"boolean")};a.is_string=function(a){return f(a,"string")};a.is_function=function(a){return f(a,"function")};a.is_empty=function(a){switch(!0){case !a:return!0;case a.length&&0<a.length:return!1;case 0===a.length:return!0}for(var c in a)if(a.hasOwnProperty(c))return!1;return!0};a.is_touch=function(){var a=navigator.userAgent.toLowerCase(),h=["iphone","ipad","ipod","android"],b;for(b in h)if(-1!==a.indexOf(h[b]))return h[b];return!1};
a.is_root=function(){return a.root===a};a.ext=function(c,b,d){d=d||"root";a.is_undefined(a[d][c])?(a[d][c]=b,a.key_exists("__init",b)&&a.is_function(b.__init)&&b.__init()):"root"!==d&&(a[d][c]=b);"root"===d&&a.set_global(c)};a.set_global=function(c,b){b&&(a.root[c]=b);a[c]=a.root[c];for(var d in a.view)a.view[d][c]=a.root[c]};a._view="";a.register_view=function(c){for(var b in a.root.process_list)a.root.process_list[b].view===c&&delete a.root.process_list[b];a.process_stop();l=c;a.ext(c,a,"view");
a.event.call(["nc","register_view"],c)};a.process_start=function(c,b){a.is_empty(a.root.process_list)&&a.event.call(["nc","loading","start"]);a.root.process_list[c]={view:l,obj:b};a.ui.loader_show(b);a.event.call(["nc","process","start"],c,b)};a.process_stop=function(c,b){var d;c&&a.key_exists(c,a.root.process_list)&&((d=a(a.root.process_list[c].obj))&&a.ui.loader_hide(d,b),a.event.call(["nc","process","stop"],c,d),delete a.root.process_list[c]);a.is_empty(a.root.process_list)&&(a.ui.loader_hide(null,
b),a.event.call(["nc","loading","stop"]))};a.config=function(c,b){if(a.is_undefined(c))return d;if(!a.is_undefined(b))d[c]=b;else if(a.is_object(c)){for(var e in c)d[e]=c[e];return d}return d[c]};a.load_dialog=function(c,b,d){return(new a.ui.modal_dialog({url:c,parameters:b||{admin_modal:1,isNaked:1},method:d})).open()};a.get_closest_editor_parent=function(a){return g(a).closest(".nc-infoblock-object, .tpl-block-full, .nc-infoblock")};a.save_inline_then_load_dialog=function(b,d){var c=g(b).data("ncDialogOpenStart");
a.get_closest_editor_parent(b).hasClass("nc--with-active-editor")&&(!c||5E3>Date.now()-c)?(c||g(b).data("ncDialogOpenStart",Date.now()),a.process_start("dialog_waiting_for_editor_release"),setTimeout(function(){a.save_inline_then_load_dialog(b,d)},10)):(g(b).removeData("ncDialogOpenStart"),a.process_stop("dialog_waiting_for_editor_release"),a.load_dialog(d||b.href))};a.load_script=function(a,b){return g.ajax({url:a,dataType:"script",cache:!0,async:!!b})};a.set_global("debug");a.set_global("view");
a.set_global("config");e.nc=a})(window,jQuery);(function(e){var g={},f=function(b,d){e.is_undefined(g[b])&&(g[b]=[]);g[b].push(d)};f.selector=[];f.call=function(b){f.selector=b.slice();var d,e,a=[],c="";for(d in b)c=(c?c+".":"")+b[d],a.unshift(c);c=[].slice.call(arguments);c[0]=f;for(d in a)if(g[a[d]])for(e in g[a[d]])g[a[d]][e].apply(null,c)};e.ext("event",f)})(nc);
(function(e){var g=!1,f=function(){};f.__init=function(){e.event(["nc.process.stop"],function(b,d){if("loadIframe()"===d)(b=e("#mainViewIframe"))&&b.attr("title",e("#mainViewHeader").text());else if("tree"===d.split(".")[0]&&e.view&&e.view.tree)return f.accessibility_link(e.view.tree("a"))})};f.loader_show=function(b){b&&e(b).addClass("nc--loading");g&&clearTimeout(g);e.root("#nc-navbar-loader").show()};f.loader_hide=function(b,d){d=d||300;b?setTimeout(function(){b.removeClass("nc--loading")},d):
g=setTimeout(function(){e.root("#nc-navbar-loader").hide()},d)};f.ext=function(b,d){e.root.ui[b]=d};f.custom_scroll=function(b){return e.config("custom_scroll")&&b.length?b.jScrollPane({autoReinitialise:!0}):!1};f.accessibility_link=function(b){b.each(function(){var b=e(this),f=b.attr("title"),a=this.innerText;a=f?f:a;if(!f){if(!a)return e.debug("badlink",b);f||b.attr("title",a)}})};e(function(){f.accessibility_link(e("a"));e(document).on("click","div.nc-panel-toggle",function(){e(this).parents("div.nc-panel").toggleClass("nc--open nc--close")})});
e.ext("ui",f)})(nc);
