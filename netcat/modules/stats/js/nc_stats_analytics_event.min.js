(function(f,g,M,p,k,x,E,F){function t(a,b,c,d){a[M](b,c,d)}function h(a,b){for(var c=0;c<a.length;c++)b(a[c],c)}function y(a,b){if(b)try{var c=JSON.parse(b);c&&a.push(c)}catch(d){u("Invalid JSON",b)}return a}function w(a){return decodeURIComponent(g.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+x+a+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1").replace(/\+/g," "))}function G(a,b,c){var d=w("domain");g.cookie=x+a+"="+encodeURIComponent(b)+";path=/"+(d?";domain="+d:"")+(c?";expires="+(new Date(Date.now()+1E3*
c)).toUTCString():"")}function H(){var a=[],b=x.length,c=g.cookie.replace(/((?:^|\s*;)[^=]+)(?=;|$)|^\s*|\s*(?:=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:=[^;]*)?;\s*/);h(c,function(c){c.indexOf(x)||a.push(c.substr(b))});return a}function N(a){var b;return function(){clearTimeout(b);b=setTimeout(a,500)}}function O(a,b){var c=[];h(a,function(a){c.push(I(a,b))});return c}function I(a,b,c){var d={},m;for(m in a)d[b[m]||(c?c(m):m)]=a[m];return d}function Y(a){return a.replace(/[A-Z]/g,function(a){return"_"+
a.toLowerCase()})}function Z(a){return a.replace(/_([a-z])/g,function(a){return a[1].toUpperCase()})}function u(a,b){z&&(b=(Array.isArray(b)?b:[b]).map(function(a){return"object"===typeof a?JSON.stringify(a):a}),console.log.apply(console,[E,a].concat(b)))}function P(a,b){return z?function(){var c=[].slice.call(arguments);u(a,c);b.apply(f,c)}:b}function v(a,b){if(a){b=b||{};var c=f.gtag?z?P("gtag",gtag):gtag:void 0;var d=c||A?F:(d=f.GoogleAnalyticsObject?f[GoogleAnalyticsObject]:F)?z?P("ga",d):d:void 0;
var m=f._gaq,r=f.dataLayer;if(!J)for(q in f)if(/yaCounter\d+/.test(q)&&f[q].reachGoal){J=f[q];break}var q=J;var g=Q?F:w("currency");Q=!0;if(c&&(g&&c("set",{currency:g}),c("event",a,b),!q))return;c="event_"+a;a:{var e=b,k={},h={},n,p={view_item_list:"impressions",view_item:"detail",add_to_cart:"add",remove_from_cart:"remove",view_promotion:"promoView",begin_checkout:"checkout",checkout_progress:"checkout",set_checkout_option:"checkoutOption"};if(a in p)var l=p[a];else if("select_content"===a)e.items?
(l="click",e.items[0]&&e.items[0].list_name&&(n={list:e.items[0].list_name})):e.promotions&&(l="promoClick");else if(/purchase|refund/.test(a))l=a,n={id:e.transaction_id,affiliation:e.affiliation,revenue:e.value,tax:e.tax,shipping:e.shipping,coupon:e.coupon};else{l={};break a}/checkout/.test(l)&&(n={step:e.checkout_step,option:e.checkout_option+(e.value?": "+e.value:"")});e.non_interaction&&(n=n||{},n.nonInteraction=1);n&&(h.actionField=n);if(e.items){var t=h.products=O(e.items,{list_name:"list",
list_position:"position"});"impressions"===l&&(h=t)}if(e.promotions)var v=h.promotions=O(e.promotions,{creative_name:"creative",creative_slot:"position"});if(e=e.currency||w("currency"))k.currencyCode=e;k[l]=h;l={action:l,category:/select_|view_/.test(a)?"engagement":"ecommerce",event:k,field:n,items:t,promos:v}}if(l.action){if(q||A)b={event:c,event_category:l.category,event_action:a,ecommerce:l.event},u("dataLayer",[b]),r.push(b);d&&(g&&d("set","currencyCode",g),b=l,q=Y(b.action),R(d,"impressions"===
q?"Impression":"Product",b.items),R(d,"Promo",b.promos),/promo_view|impressions/.test(q)||d("ec:setAction",q,b.field),d("send","event",b.category,a))}else l=b.event_category||"event",A&&(n=I(b,{}),n.event=c,n.event_action=n.event_action||a,u("dataLayer",[n]),r.push(n)),d?(m="event",r={value:"eventValue",description:"exDescription",fatal:"exFatal"},"timing_complete"===a?(r.name="timingVar",m="timing"):"exception"===a&&(m=a),r=I(b,r,Z),r.eventAction=r.eventAction||a,r.eventCategory=r.eventCategory||
"event",d("send",m,r)):m&&(d=["_trackEvent",l,a,b.event_label],u("_gaq",d),m.push(d)),q&&(a=l+"_"+a,u("YM.reachGoal",[a,b]),q.reachGoal(a,b))}}function S(a){v.apply(f,a)}function K(a){var b=a.target;a=a.type;var c="click"===a,d;do{var m=b[p](k+(a+"-category"));m&&aa(m,b[p](k+(a+"-action"))||a,b[p](k+(a+"-label")));c&&(d=d||"A"===b.tagName)&&(T(b,"item"),T(b,"promo"))}while(c&&(b=b.parentNode)&&b[p])}function R(a,b,c){if(!c||!c.length)return!1;h(c,function(c){a("ec:add"+b,c)});return!0}function T(a,
b){var c=a[p](k+b);a={};if(c&&(c=y([],c),c.length)){if("item"===b){if(a.items=c,a.content_type="product",b=c[0].list_name)a.list_name=b}else a.promotions=c;v("select_content",a)}}function B(a){H().length!==U&&(w("lock")?a||setTimeout(B,5E3):(G("lock",1,5),h(ba(),S),G("lock","",-1),U=H().length))}function ba(){var a={};h(H(),function(b){var c=b.match(/^event_(\d+_\d+)_(\d+)$/);if(c){var d=c[1];a[d]||(a[d]=[]);a[d][c[2]]=w(b);G(b,"",-1)}});var b=[],c;for(c in a){var d=a[c].join("");u("cookie",[d]);
y(b,d)}return b}function ca(){var a=g.querySelectorAll("["+k+"item],["+k+"promo],["+k+"view-category]");h(a,function(a){a[p](k+"-init")||(L.push(a),a.setAttribute(k+"-init",1))})}function V(){h(L,function(a,b){var c;if(c=a){c=a.getBoundingClientRect();var d=g.documentElement;c=0<c.height&&0<=c.right&&0<=c.bottom&&c.left+.7*c.width<=d.clientWidth&&c.top+.7*c.height<=d.clientHeight}c&&(delete L[b],a[p](k+"view-category")&&K({target:a,type:"view"}),y(C,a[p](k+"item")),y(D,a[p](k+"promo")))})}function da(){if("visible"===
g.visibilityState){var a=g.forms,b=a.length;if(b!==W){for(var c=0;c<b;c++)t(a[c],"submit",K,!0);W=b}ca();V();B()}}function ea(){var a=N(V),b=N(da);t(f,"scroll",a);t(f,"resize",a);t(f,"focus",b);b();f.MutationObserver?(new MutationObserver(b)).observe(g,{childList:!0,subtree:!0}):setInterval(B,1E4)}if(g[M]){var z=!(!w("debug")||!f.console),J,X=/\s*,\s*/,A,Q,aa=function(a,b,c){h((a||"").split(X),function(a){h((c||"").split(X),function(c){v(b,{event_category:a,event_label:c})})})},C=[],D=[],U=0,L=[],
W=0;t(g,"click",K,!0);t(g,"DOMContentLoaded",function(){h(g.getElementsByTagName("script"),function(a){/\/gtm.js\?/.test(a.src)&&(u("found",["gtm.js"]),A=!0)});var a=f[E];a&&a.E&&h(a.E,S);f[E]=v;setTimeout(ea,1E3)});t(f,"beforeunload",function(){C.length&&(v("view_item_list",{event_category:"engagement",items:C}),C=[]);D.length&&(v("view_promotion",{event_category:"engagement",promotions:D}),D=[]);B(!0)})}})(window,document,"addEventListener","getAttribute","data-analytics-","nc_stats_","nc_stats_analytics_event");
