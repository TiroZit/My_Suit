<!-- FormPrefix --><?= $f_AdminCommon; ?>
<?php if ($admin_mode) { ?>
    <div class="nc-popup-admin-helper">
        Модальное окно "Избранное"
    </div>
<?php } ?>

<div class="popup-favorite fav nc-popup" id="nc-popup-favorite">
    <div class="popup">
        <div class="popup-content-wrap">
            <div class="popup-content">
                <div class="popup-content-inner js-popup-inner">
                    <a class="popup-content-close js-popup-close" href="#">  </a>
                    <div class="popup-content-text">
                        <div class="popup-content-icon"><i class="far fa-star"></i></div>
                        <div class="popup-content-header tpl-text-header4"></div>
                        <div class="popup-content-caption tpl-text-default"></div>
                        <div class="popup-content-buttons">
                            <button class="tpl-button-primary tpl-button-primary-big js-popup-close"> Продолжить
                                покупки
                            </button>
                            <button class="tpl-button-secondary tpl-button-secondary-big"
                                    onclick="window.location='<?= nc_folder_path($current_catalogue['Netshop_Favorites_Sub_ID']); ?>'">Посмотреть избранное
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- /FormPrefix -->

<!-- RecordTemplate --><?= $f_AdminButtons; ?><!-- /RecordTemplate -->

<!-- FormSuffix --><script>
    document.addEventListener("DOMContentLoaded", function() {
        jQuery(document).on('ncNetshopGoodsFavoriteAdded', function (event) {
            var data = event.originalEvent.detail;
            var popupId = 'nc-popup-favorite';
            var $popup = jQuery('#' + popupId);
            if (!$popup) {
                return;
            }
            if (data.modal) {
                var $popupHeader = $popup.find('.popup-content-header');
                $popupHeader.text('Товар добавлен в избранное');
                // Вызовем модальное окно
                nc_popup_open(popupId);
            }
        });
        jQuery(document).on('ncNetshopGoodsFavoriteRemoved', function (event) {
            var data = event.originalEvent.detail;
            var popupId = 'nc-popup-favorite';
            var $popup = jQuery('#' + popupId);
            if (!$popup) {
                return;
            }
            if (data.modal) {
                var $popupHeader = $popup.find('.popup-content-header');
                $popupHeader.text('Товар удален из избранного');
                // Вызовем модальное окно
                nc_popup_open(popupId);
            }
        });
    });
</script><!-- /FormSuffix -->